<div style="padding-top: 20px;">
    <section class="header-filter">
        <div [ngClass]="filterClass">
            <mat-form-field class="filter-env-selector">
                <mat-select placeholder="Environment selection" [formControl]="environmentSelection">
                    <mat-option *ngFor="let environment of environments" [value]="environment.name">
                        {{environment.name}}
                    </mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="filter-key-selector">
                <input #switcherInput matInput placeholder="Switcher Key" [formControl]="switcherKeyFormControl">
            </mat-form-field>
            <mat-form-field *ngIf="switcher != null" class="filter-env-selector">
                <mat-select placeholder="Group By" [(ngModel)]="dateGroupPattern">
                    <mat-option value="YYYY-MM">Month</mat-option>
                    <mat-option value="YYYY-MM-DD">Day</mat-option>
                    <mat-option value="YYYY-MM-DD HH">Hour</mat-option>
                    <mat-option value="YYYY-MM-DD HH:mm">Minute</mat-option>
                </mat-select>
            </mat-form-field>
            <mat-form-field class="filter-date-selector">
                <input matInput [ngxMatDatetimePicker]="fromPicker" placeholder="From" [formControl]="dateAfterFormControl">
                <mat-datepicker-toggle matSuffix [for]="fromPicker"></mat-datepicker-toggle>
                <ngx-mat-datetime-picker #fromPicker></ngx-mat-datetime-picker>
            </mat-form-field>
            <mat-form-field class="filter-date-selector">
                <input matInput [ngxMatDatetimePicker]="toPicker" placeholder="To" [formControl]="dateBeforeFormControl">
                <mat-datepicker-toggle matSuffix [for]="toPicker"></mat-datepicker-toggle>
                <ngx-mat-datetime-picker #toPicker></ngx-mat-datetime-picker>
            </mat-form-field>
        </div>
        <div class="body-filter-btns">
            <button mat-button class="btn-element" (click)="applyFilter()">
                <mat-icon style="font-size: larger;">gps_fixed</mat-icon>
                Filter
            </button>
            <button mat-button class="btn-element" (click)="toggleFilter()">
                <mat-icon *ngIf="filterClass === 'body-filter show'" style="font-size: larger;">location_disabled</mat-icon>
                <mat-icon *ngIf="filterClass === 'body-filter hide'" style="font-size: larger;">gps_not_fixed</mat-icon>
                Toggle Filter
            </button>
        </div>
    </section>
    <span *ngIf="loading" class="spinner-border spinner-border-sm mr-1"></span>
    <div *ngIf="error" class="alert alert-danger mt-3 mb-0">{{error}}</div>
    <section id="data-section" *ngIf="!loading" style="margin-top: 20px;">
        <div #tabmetrics>
            <ngb-tabset [activeId]="1" [destroyOnHide]="false">
                <ngb-tab id="1">
                    <ng-template ngbTabTitle>
                        <div (click)="scrollToElement(tabmetrics)">Overall Statistics</div>
                    </ng-template>
                    <ng-template ngbTabContent>
                        <app-metric-statistics [data]="metrics" [switcher]="switcher"></app-metric-statistics>
                    </ng-template>
                </ngb-tab>
                <ngb-tab id="2">
                    <ng-template ngbTabTitle>
                        <div (click)="scrollToElement(tabmetrics)">Data</div>
                    </ng-template>
                    <ng-template ngbTabContent>
                        <app-metric-data [data]="metrics.data"></app-metric-data>
                    </ng-template>
                </ngb-tab>
            </ngb-tabset>
        </div>
    </section>
</div>